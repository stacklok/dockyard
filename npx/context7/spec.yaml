# Upstash Context7 MCP Server Configuration
# This server provides vector search and context management capabilities
# Package: https://www.npmjs.com/package/@upstash/context7-mcp
# Repository: https://github.com/upstash/context7
# Will build as: ghcr.io/stacklok/dockyard/npx/context7:1.0.17

metadata:
  name: context7
  description: "Upstash Context7 MCP server for vector search and context management"
  protocol: npx  # Uses Node.js package manager (npm/npx)

spec:
  package: "@upstash/context7-mcp"  # NPM package name
  version: "2.1.1"                # Specific version to install

provenance:
  # Note: This package does not have npm provenance attestations (Sigstore signatures)
  # The repository information below is verified from npm metadata and GitHub
  repository_uri: "https://github.com/upstash/context7"
  repository_ref: "refs/tags/v1.0.17"

# Security allowlist for known false positives
security:
  # Mock env vars allow security scanning without real credentials
  mock_env:
    - name: CONTEXT7_API_KEY
      value: "mock-context7-api-key-for-scanning"
      description: "Context7 API key - mock value for security scanning"
  allowed_issues:
    - code: "AITech-1.1"
      reason: |
        YARA flags tool descriptions for coercive language patterns like "You MUST call"
        and "Do not call this tool more than 3 times". These are legitimate operational
        instructions for rate-limiting and proper API usage workflow (requiring
        resolve-library-id before query-docs), not prompt injection attempts. LLM
        analyzer confirms these are SAFE. Verified in v2.1.0.
