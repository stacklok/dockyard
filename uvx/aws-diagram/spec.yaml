# AWS Diagram MCP Server Configuration
# Official AWS Labs MCP server for creating AWS architecture diagrams
# Package: https://pypi.org/project/awslabs.aws-diagram-mcp-server/
# Repository: https://github.com/awslabs/mcp/tree/main/src/aws-diagram-mcp-server
# Will build as: ghcr.io/stacklok/dockyard/uvx/aws-diagram-mcp-server:1.0.5

metadata:
  name: aws-diagram
  description: "Generate AWS diagrams, sequence diagrams, flow diagrams, and class diagrams using Python code"
  protocol: uvx  # Uses Python with uv package manager

spec:
  package: "awslabs.aws-diagram-mcp-server"  # PyPI package name
  version: "1.0.11"                           # Latest version from PyPI

provenance:
  # Expected source repository (used for attestation verification)
  repository_uri: "https://github.com/awslabs/mcp"
  repository_ref: "refs/heads/main"  # Using main branch as specific tags are not available for this package

  # Attestation information (PEP 740)
  # Verified with: dockhand verify-provenance -c uvx/aws-diagram/spec.yaml
  attestations:
    available: true
    verified: true  # Cryptographic verification via sigstore-go
    publisher:
      kind: "GitHub"
      repository: "awslabs/mcp"
      workflow: ".github/workflows/publish.yml"

security:
  # Security allowlist for known issues that are acceptable in this context
  allowed_issues:
    - code: "W001"
      reason: "Tool description contains imperative instructions for AI agents which are necessary for proper operation"
    - code: "TF002"
      reason: "Destructive toxic flow is mitigated by container sandboxing - code execution is isolated from host system"
